<section><header ng-switch="section.type"><h1 ng-switch-default="ng-switch-default" ng-bind="section.form_name"></h1><h1 ng-switch-when="Questionnaire" ng-bind="'Question ' + current + ' of ' + section.fields.length"></h1></header><form ng-submit="submitForm($index, section.fields)"><p ng-if="section.form_description" ng-bind="section.form_description" bind-once="bind-once"></p><ol class="form"><li ng-repeat="field in section.fields"><label for="form-{{section.form_template_id}}-{{$index}}" ng-bind="field.field_label" bind-once="bind-once"></label><span ng-switch="field.type"><input ng-switch-when="Text" type="text" ng-model="field.submit_input" ng-required="field.required" id="form-{{section.form_template_id}}-{{$index}}"/><input ng-switch-when="Email" type="email" ng-required="field.required" ng-model="field.submit_input" id="form-{{section.form_template_id}}-{{$index}}"/><input ng-switch-when="Date" type="date" ng-model="field.submit_input" ng-required="field.required" id="form-{{section.form_template_id}}-{{$index}}"/><ul ng-switch-when="Checkboxes"><li ng-repeat="opt in field.opts"><input type="checkbox" name="form-{{section.form_template_id}}-{{$parent.$index}}[]" value="{{$index}}" ng-model="field.submit_input[$index]" id="form-{{section.form_template_id}}-{{$parent.$index}}-{{$index}}"/><label for="form-{{section.form_template_id}}-{{$parent.$index}}-{{$index}}" ng-bind="opt"></label></li></ul><ul ng-switch-when="Radio"><li ng-repeat="opt in field.opts"><input type="radio" name="form-{{section.form_template_id}}-{{$parent.$index}}" ng-model="field.submit_input" value="{{$index}}" ng-required="field.required" id="form-{{section.form_template_id}}-{{$parent.$index}}-{{$index}}"/><label for="form-{{section.form_template_id}}-{{$parent.$index}}-{{$index}}" ng-bind="opt"></label></li></ul><div ng-switch-when="Image" restrict="image.*" class="file-upload"><figure ng-if="preview" class="preview"><img ng-if="preview.img" height="128px" ng-src="{{preview.img}}" alt=""/><figcaption><p><strong ng-bind="preview.name"></strong> (<span ng-bind="preview.size | Filesize"></span>)</p><p><span ng-if="status == 'loading'">Uploading fileâ€¦</span><span ng-if="status == 'loaded'">File uploaded.</span><button type="button" ng-if="!status" ng-click="uploadFile()">Upload file</button></p></figcaption></figure><label for="form-{{section.form_template_id}}-{{$index}}" ng-show="status !== 'loaded'" class="btn btn-upload"><input type="file" ng-required="field.required" id="form-{{section.form_template_id}}-{{$index}}" class="visually-hidden"/><span ng-switch="!!preview"><span ng-switch-when="true">Replace the file to attach</span><span ng-switch-default="ng-switch-default">Select the file to attach</span></span></label><span ng-if="!fileAPI">Your browser doesn't support the <code>file API</code></span></div><div ng-switch-when="Slider" class="form-slider"><a ng-click="field.submit_input = field.slider_floor" role="button" tabindex="0" class="limit-label">{{field.slider_floor_label}} </a><input type="range" ng-model="field.submit_input" ng-required="field.required" min="{{field.slider_floor}}" max="{{field.slider_ceiling}}" step="{{field.slider_step}}"/><a ng-click="field.submit_input = field.slider_ceiling" role="button" tabindex="0" class="limit-label">{{field.slider_ceiling_label}} </a><br/><strong>{{field.submit_input}}/{{field.slider_ceiling}}</strong></div><textarea ng-switch-when="Longtext" rows="5" id="form-{{section.form_template_id}}-{{$index}}"></textarea><select ng-switch-when="Select" ng-model="field.submit_input" ng-required="field.required" id="form-{{section.form_template_id}}-{{$index}}"><option ng-repeat="opt in field.opts" value="{{$index}}" ng-bind="opt"></option></select><select ng-switch-when="Country" ng-model="field.submit_input" ng-required="field.required" id="form-{{section.form_template_id}}-{{$index}}"><option ng-repeat="opt in countries" ng-value="{{opt.code}}" ng-bind="opt.name"></option></select></span><p ng-if="field.field_description" ng-bind-html="field.field_description" bind-once="bind-once"></p></li></ol><p ng-if="section.feedback &amp;&amp; !section.isComplete"><strong ng-bind="section.feedback"></strong></p><div ng-if="section.form_confirmation_message &amp;&amp; section.isComplete" ng-bind-html="section.form_confirmation_message" bind-once="bind-once"></div><article ng-if="section.scores"><header><h1>Your results</h1></header><ol><li ng-repeat="score in section.scores"><strong>{{score.label}}: <em ng-bind="score.total"></em></strong></li></ol></article><p class="submit"><button type="submit">Submit <span ng-if="section.submitProgress &gt; 0 &amp;&amp; !section.isComplete" ng-bind="section.submitProgress"></span></button></p></form></section>